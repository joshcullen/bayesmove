<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prepare data for analysis • bayesmove</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Prepare data for analysis">
<meta property="og:description" content="bayesmove">
<meta property="og:image" content="http://joshcullen.github.io/bayesmove/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-151357058-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151357058-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bayesmove</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/joshcullen/bayesmove">
    <span class="fas fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Prepare-data-for-analysis_files/header-attrs-2.6/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Prepare data for analysis</h1>
            
            <h4 class="date">26 April 2021</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/joshcullen/bayesmove/blob/master/vignettes/Prepare-data-for-analysis.Rmd"><code>vignettes/Prepare-data-for-analysis.Rmd</code></a></small>
      <div class="hidden name"><code>Prepare-data-for-analysis.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>In order to estimate behavioral states from telemetry (and biologging data) using this non-parametric Bayesian framework, the data must be formatted in a certain way to run properly. This especially applies to the initial analysis of the raw data by the segmentation model. This tutorial will walk through the different steps of preparing the raw telemetry data for analysis by the models within <code>bayesmove</code>.</p>
</div>
<div id="but-first" class="section level2">
<h2 class="hasAnchor">
<a href="#but-first" class="anchor"></a>But first…</h2>
<p>Before we begin in earnest, the practitioner must make sure the data have been cleaned. This includes the removal of duplicate observations and sorting the observations in consecutive order per animal ID. At a minimum, an object of class <code>data.frame</code> with columns for animal ID, date, x coordinate (e.g., longitude, Easting), and y coordinate (e.g., latitude, Northing) must be included.</p>
</div>
<div id="calculating-step-lengths-turning-angles-and-time-intervals" class="section level2">
<h2 class="hasAnchor">
<a href="#calculating-step-lengths-turning-angles-and-time-intervals" class="anchor"></a>Calculating step lengths, turning angles, and time intervals</h2>
<p>In many cases, step lengths and turning angles are used to estimate latent behavioral states from animal movement. Since these metrics are only directly comparable if measured on the same time interval, it is also important to calculate the time interval between successive observations since only those at the primary time interval of interest will be retained for further analysis.</p>
<p>First, let’s take a look at what the data should look like before calculating these data streams:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/joshcullen/bayesmove">bayesmove</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org">purrr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span>

<span class="co"># Load data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">tracks</span><span class="op">)</span>

<span class="co"># Check data structure</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tracks</span><span class="op">)</span>
<span class="co">#&gt;    id                date        x          y</span>
<span class="co">#&gt; 1 id1 2020-07-02 11:59:41  0.00000  0.0000000</span>
<span class="co">#&gt; 2 id1 2020-07-02 12:58:26 10.56492 -1.6654990</span>
<span class="co">#&gt; 3 id1 2020-07-02 13:59:31 25.50174 -0.6096675</span>
<span class="co">#&gt; 4 id1 2020-07-02 15:01:27 31.22014  9.5438464</span>
<span class="co">#&gt; 5 id1 2020-07-02 15:59:56 36.15821 19.8737009</span>
<span class="co">#&gt; 6 id1 2020-07-02 16:58:38 39.06810 26.4996352</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">tracks</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    15003 obs. of  4 variables:</span>
<span class="co">#&gt;  $ id  : chr  "id1" "id1" "id1" "id1" ...</span>
<span class="co">#&gt;  $ date: POSIXct, format: "2020-07-02 11:59:41" "2020-07-02 12:58:26" ...</span>
<span class="co">#&gt;  $ x   : num  0 10.6 25.5 31.2 36.2 ...</span>
<span class="co">#&gt;  $ y   : num  0 -1.67 -0.61 9.54 19.87 ...</span></pre></div>
<p><img src="Prepare-data-for-analysis_files/figure-html/plot-tracks-1.png" width="672"></p>
<p>We can see that ‘date’ is in a <code>POSIXct</code> format and that the x and y coordinates are stored as <code>numeric</code> variables. Technically, the coordinates can be in a lat-lon format, but this will make interpretation of step lengths more difficult since they will be recorded in map units. Therefore, it is suggested that x and y coordinates are in a UTM projection where the unit of measure is meters. The ‘id’ column can be stored either as <code>character</code> or <code>factor</code>.</p>
<p>Now, let’s calculate step length, turning angle, and time interval:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="va">tracks</span><span class="op">&lt;-</span> <span class="fu"><a href="../reference/prep_data.html">prep_data</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">tracks</span>, coord.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span>,<span class="st">"y"</span><span class="op">)</span>, id <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tracks</span><span class="op">)</span>
<span class="co">#&gt;    id                date        x          y   step  angle      NSD   dt</span>
<span class="co">#&gt; 1 id1 2020-07-02 11:59:41  0.00000  0.0000000 10.695     NA    0.000 3526</span>
<span class="co">#&gt; 2 id1 2020-07-02 12:58:26 10.56492 -1.6654990 14.974  0.227  114.392 3664</span>
<span class="co">#&gt; 3 id1 2020-07-02 13:59:31 25.50174 -0.6096675 11.653  0.987  650.710 3716</span>
<span class="co">#&gt; 4 id1 2020-07-02 15:01:27 31.22014  9.5438464 11.449  0.067 1065.782 3509</span>
<span class="co">#&gt; 5 id1 2020-07-02 15:59:56 36.15821 19.8737009  7.237  0.032 1702.380 3522</span>
<span class="co">#&gt; 6 id1 2020-07-02 16:58:38 39.06810 26.4996352  0.119 -2.804 2228.547 3738</span></pre></div>
<p>The new tracks data frame has three new columns (‘step’, ‘angle’, and ‘dt’), which store the data for step lengths, turning angles, and time intervals, respectively. Since this example uses coordinates that are considered to be in a UTM projection, step lengths are reported in meters. Turning angles are reported in radians and time intervals are reported in seconds. Alternatively, these measures can also be calculated using functions from other R packages, such as <code>adehabitatLT</code>.</p>
</div>
<div id="round-times-and-filter-observations" class="section level2">
<h2 class="hasAnchor">
<a href="#round-times-and-filter-observations" class="anchor"></a>Round times and filter observations</h2>
<p>Next, we want to filter the data so that we only retain data for a given time interval (or step). Let’s look at a distribution of the time intervals that were just calculated:</p>
<p><img src="Prepare-data-for-analysis_files/figure-html/hist-1.png" width="672" style="display: block; margin: auto;"></p>
<p>Based on this histogram, it appears that 3600 s (1 hour) is likely the primary time interval, where some observations slightly deviate from this exact interval. I will now round all time intervals (dt) and dates to reflect this rounding of times within a given tolerance window. In this example, I will choose 3 minutes (180 s) as the tolerance on which to round observations close to the primary time interval (3600 s).</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">tracks</span><span class="op">&lt;-</span> <span class="fu"><a href="../reference/round_track_time.html">round_track_time</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">tracks</span>, id <span class="op">=</span> <span class="st">"id"</span>, int <span class="op">=</span> <span class="fl">3600</span>, tol <span class="op">=</span> <span class="fl">180</span>, time.zone <span class="op">=</span> <span class="st">"UTC"</span>,
                          units <span class="op">=</span> <span class="st">"secs"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tracks</span><span class="op">)</span>
<span class="co">#&gt;    id                date        x          y   step  angle      NSD   dt</span>
<span class="co">#&gt; 1 id1 2020-07-02 11:59:41  0.00000  0.0000000 10.695     NA    0.000 3600</span>
<span class="co">#&gt; 2 id1 2020-07-02 12:59:41 10.56492 -1.6654990 14.974  0.227  114.392 3600</span>
<span class="co">#&gt; 3 id1 2020-07-02 13:59:41 25.50174 -0.6096675 11.653  0.987  650.710 3600</span>
<span class="co">#&gt; 4 id1 2020-07-02 14:59:41 31.22014  9.5438464 11.449  0.067 1065.782 3600</span>
<span class="co">#&gt; 5 id1 2020-07-02 15:59:41 36.15821 19.8737009  7.237  0.032 1702.380 3600</span>
<span class="co">#&gt; 6 id1 2020-07-02 16:59:41 39.06810 26.4996352  0.119 -2.804 2228.547 3600</span>

<span class="co"># How many different time intervals?</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span><span class="op">(</span><span class="va">tracks</span><span class="op">$</span><span class="va">dt</span><span class="op">)</span>
<span class="co">#&gt; [1] 112</span>

<span class="co"># How many observations of each time interval?</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">tracks</span><span class="op">$</span><span class="va">dt</span>, main <span class="op">=</span> <span class="st">"Rounded Time Intervals (s)"</span><span class="op">)</span></pre></div>
<p><img src="Prepare-data-for-analysis_files/figure-html/round-times-1.png" width="672"></p>
<p>It looks like nearly all observations had a time interval within the tolerance limit. Now the dataset needs to be filtered to only include observations where <code>dt == 3600</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="co"># Create list from data frame</span>
<span class="va">tracks.list</span><span class="op">&lt;-</span> <span class="fu"><a href="../reference/df_to_list.html">df_to_list</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">tracks</span>, ind <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span>

<span class="co"># Filter observations</span>
<span class="va">tracks_filt.list</span><span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_time.html">filter_time</a></span><span class="op">(</span>dat.list <span class="op">=</span> <span class="va">tracks.list</span>, int <span class="op">=</span> <span class="fl">3600</span><span class="op">)</span>

<span class="co"># View sample of results</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tracks_filt.list</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt;    id                date             x             y   step  angle    NSD   dt</span>
<span class="co">#&gt; 1 id3 2020-07-02 12:01:26  0.000000e+00  0.000000e+00  0.000     NA  0.000 3600</span>
<span class="co">#&gt; 2 id3 2020-07-02 13:01:26 -6.164902e-05 -6.576507e-05  0.145  2.728  0.000 3600</span>
<span class="co">#&gt; 3 id3 2020-07-02 14:01:26  1.336034e-01  5.716719e-02  0.001 -2.109  0.021 3600</span>
<span class="co">#&gt; 4 id3 2020-07-02 15:01:26  1.335014e-01  5.640661e-02  3.321 -0.842  0.021 3600</span>
<span class="co">#&gt; 5 id3 2020-07-02 17:04:44 -2.601031e+00 -1.807549e+00 11.272  0.120 10.033 3600</span>
<span class="co">#&gt; 6 id3 2020-07-02 18:04:44  8.594375e+00 -4.939411e-01  0.000  2.125 74.107 3600</span>
<span class="co">#&gt;   obs time1</span>
<span class="co">#&gt; 1   1     1</span>
<span class="co">#&gt; 2   2     2</span>
<span class="co">#&gt; 3   3     3</span>
<span class="co">#&gt; 4   4     4</span>
<span class="co">#&gt; 5   6     5</span>
<span class="co">#&gt; 6   7     6</span>

<span class="co"># Check that only observations at 1 hour time intervals are retained per ID</span>
<span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">tracks_filt.list</span>, <span class="op">~</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">dt</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; $id1</span>
<span class="co">#&gt; [1] 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $id2</span>
<span class="co">#&gt; [1] 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $id3</span>
<span class="co">#&gt; [1] 1</span></pre></div>
<p>There are also two new columns that have been added to the data frame of each ID: ‘obs’ and ‘time1’. The ‘obs’ column holds the number of the observation before the data were filtered, whereas ‘time1’ stores the number of the observation after filtering. This is important since the ‘obs’ column will allow the merging of results from this model with that of the original data and the ‘time1’ column will be used to segment the tracks.</p>
</div>
<div id="discretize-data-streams" class="section level2">
<h2 class="hasAnchor">
<a href="#discretize-data-streams" class="anchor"></a>Discretize data streams</h2>
<p>The unique feature of this modeling framework is that it does not rely upon standard parametric density functions that are used in nearly every other model that estimates behavior. This is expected to reduce any constraints posed by the selection of a given parametric density function and allow for greater model flexibility. However, this does require the user to define the number of bins for each variable and how they will be discretized.</p>
<p>Let’s first take a look at how step lengths and turning angles are distributed:</p>
<p><img src="Prepare-data-for-analysis_files/figure-html/cont-distribs-1.png" width="672"><img src="Prepare-data-for-analysis_files/figure-html/cont-distribs-2.png" width="672"></p>
<p>We can see that step lengths are highly right-skewed whereas turning angles are a little more balanced despite having peaks at <span class="math inline">\(-\pi, 0\)</span>, and <span class="math inline">\(\pi\)</span> radians. These distributions will inform how we discretize these variables.</p>
<p>An example is included below for the discretization of step lengths and turning angles, but this can be performed in many different ways.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="co"># Define bin number and limits for turning angles</span>
<span class="va">angle.bin.lims</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from<span class="op">=</span><span class="op">-</span><span class="va">pi</span>, to<span class="op">=</span><span class="va">pi</span>, by<span class="op">=</span><span class="va">pi</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span>  <span class="co">#8 bins</span>

<span class="co"># Define bin number and limits for step lengths</span>
<span class="va">dist.bin.lims</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">tracks</span><span class="op">[</span><span class="va">tracks</span><span class="op">$</span><span class="va">dt</span> <span class="op">==</span> <span class="fl">3600</span>,<span class="op">]</span><span class="op">$</span><span class="va">step</span>,
                       <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.25</span>,<span class="fl">0.50</span>,<span class="fl">0.75</span>,<span class="fl">0.90</span>,<span class="fl">1</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>  <span class="co">#5 bins</span>

<span class="va">angle.bin.lims</span>
<span class="co">#&gt; [1] -3.1415927 -2.3561945 -1.5707963 -0.7853982  0.0000000  0.7853982  1.5707963</span>
<span class="co">#&gt; [8]  2.3561945  3.1415927</span>

<span class="va">dist.bin.lims</span>
<span class="co">#&gt;       0%      25%      50%      75%      90%     100% </span>
<span class="co">#&gt;  0.00000  0.10700  1.27900  5.73825 10.75250 25.25200</span></pre></div>
<p>Bins were defined in different ways for each data stream due to their inherent properties. Step lengths were broken into 5 bins (6 limits) using quantiles, which assisted in creating a more balanced distribution of bins since step lengths are typically right-skewed. Only step lengths that were observed at the primary time interval (3600 s; 1 h) were used to calculate quantiles. Since turning angles are already relatively balanced, these were separated into 8 bins (9 limits) of equal width centered at 0 radians (from <span class="math inline">\(-\pi\)</span> to <span class="math inline">\(\pi\)</span>). The following code shows how to use these limits to discretize the data:</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="co"># Assign bins to observations</span>
<span class="va">tracks_disc.list</span><span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">tracks_filt.list</span>,
                       <span class="va">discrete_move_var</span>,
                       lims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">dist.bin.lims</span>, <span class="va">angle.bin.lims</span><span class="op">)</span>,
                 varIn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"step"</span>, <span class="st">"angle"</span><span class="op">)</span>,
                 varOut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SL"</span>, <span class="st">"TA"</span><span class="op">)</span><span class="op">)</span></pre></div>
<p>The plots below show the limits used to define the bins for each continuous variable, as well as what these distributions look like after discretization. First, step lengths will be shown:</p>
<p><img src="Prepare-data-for-analysis_files/figure-html/distrib-lims-SL-1.png" width="672"></p>
<pre><code>#&gt; `summarise()` has grouped output by 'key'. You can override using the `.groups` argument.</code></pre>
<p><img src="Prepare-data-for-analysis_files/figure-html/distrib-lims-SL-2.png" width="672"></p>
<p>And next the plots for turning angles:</p>
<p><img src="Prepare-data-for-analysis_files/figure-html/distrib-lims-TA-1.png" width="672"><img src="Prepare-data-for-analysis_files/figure-html/distrib-lims-TA-2.png" width="672"></p>
<p>The data are now in the proper format to be analyzed by the segmentation model within <code>bayesmove</code>. While these bin limits are suggested as default settings, they are by no means the only way to discretize the data. This may require trial and error after viewing results from the segmentation model.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Joshua Cullen, Denis Valle.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
